<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    
    <script>
        //console.log(Math.floor(Math.random()*100+5))

        const rock = 'Rock';
        const paper = 'Paper';
        const scissors = 'Scissors';

        function getComputerChoice() {
            let choice = Math.floor(Math.random()*100+5);

            if (choice < 35) {
                choice = rock;
            }
            else if (choice >= 35 && choice < 70) {
                choice = paper;
            }
            else if (choice >= 70 && choice < 105) {
                choice = scissors;
            }
            return choice;
        }

        let playerChoice; 
        let computerChoice;

        let win = `You won! ${playerChoice} beats ${computerChoice}`;
        let lose = `You lost! ${computerChoice} beats ${playerChoice}`;
        let draw = `Tie! You both chose ${computerChoice}`;
        
        function playRound(playerChoice, computerChoice) {

            computerChoice = getComputerChoice();
            playerChoice = prompt('Choose your gesture (Rock / Paper / Scissors)');
            
            win = `You won! ${playerChoice} beats ${computerChoice}`;
            lose = `You lost! ${computerChoice} beats ${playerChoice}`;
            draw = `Tie! You both chose ${computerChoice}`;

            let playerChoiceLower = playerChoice.toLocaleLowerCase();
            let computerChoiceLower = computerChoice.toLowerCase();

            if(playerChoiceLower == rock.toLowerCase() && computerChoiceLower == paper.toLowerCase()) {
                return lose;
            }
            else if(playerChoiceLower == paper.toLowerCase() && computerChoiceLower == scissors.toLowerCase()) {
                return lose;
            }
            else if(playerChoiceLower == scissors.toLowerCase() && computerChoiceLower == rock.toLowerCase()) {
                return lose;
            }
            else if (playerChoiceLower == computerChoiceLower) {
                return draw;
            }
            else if (playerChoiceLower !== rock.toLowerCase() && playerChoiceLower !== paper.toLowerCase() && playerChoiceLower !== scissors.toLowerCase()) {
                //playerChoiceLower.toLowerCase() = prompt('Choose one of the three gestures!');
                //alert('Refresh the page and choose one of the three gestures!')
                playGame();            
            }
            else {
                return win;
            }
            
        }
        //console.log(playRound(playerChoice, computerChoice));

        //variables to record the score 
        let playerScore = 0;
        let computerScore = 0;

        let returnVal;

        function playGame() {
            // loop to play 5 rounds
            for(let i = 0; i < 5; i++) {
                returnVal = playRound(playerChoice, computerChoice);        //put playRound return value into variable
                console.log(returnVal)      //print result of each round (return value of playRound)

                // if statement to record score after each round
                if(returnVal == win) {
                playerScore++;
                }
                else if(returnVal == lose) {
                computerScore++;
                }
            }         
            // console.log(playerScore)
            // console.log(computerScore)

            // if tstement to announce the winner
            if(playerScore < computerScore) {
                console.log(`Computer won with the score of ${computerScore}`)
            }
            else if(playerScore > computerScore) {
                console.log( `Big win! You beat the computer with the score of ${playerScore}`);
            }
            else {
                console.log('Tie! You both gained the same score')
            }
        }
        playGame();
                
    </script>

</body>
</html>