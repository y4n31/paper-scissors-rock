<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="./img/favicon.png">
    <link rel="stylesheet" href="style.css">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <div class="container">
        <span id="winner-announcer"></span>
        <span id="result-announcer">Choose your gest!</span>
        <div id="score">
            <div class="title">
                <span id="score-title">Player</span>
                <span id="score-title">Computer</span>
            </div>
            <div class="running-score">
                <span id="player-score">0</span>
                <span id="computer-score">0</span>
            </div>
        </div>
        <ul id="play-buttons">
            <li><button id="rock">Rock</button></li>
            <li><button id="paper">Paper</button></li>
            <li><button id="scissors">Scissors</button></li>
        </ul>
    </div>

    <script>
        const rock = 'Rock';
        const paper = 'Paper';
        const scissors = 'Scissors';

        const rockButton = document.querySelector('#rock');
        const paperButton = document.querySelector('#paper');
        const scissorsButton = document.querySelector('#scissors');
        const playerSpan = document.querySelector('#player-score');
        const computerSpan = document.querySelector('#computer-score');
        const resultSpan = document.querySelector('#result-announcer');
        const winnerSpan = document.querySelector('#winner-announcer');

        function getComputerChoice() {
            let choice = Math.floor(Math.random()*100+5);

            if (choice < 35) {
                choice = rock;
            }
            else if (choice >= 35 && choice < 70) {
                choice = paper;
            }
            else if (choice >= 70 && choice < 105) {
                choice = scissors;
            }
            return choice;
        }

        let playerChoice; 
        let computerChoice;

        let win;
        let lose;
        let draw;

        let playerScore = 0;
        let computerScore = 0; 

        rockButton.addEventListener('click', function(event) { 
            computerChoice = getComputerChoice();
            playerChoice = rock;
            draw = `Tie! You both chose ${computerChoice}`;
            lose = `You lost! ${computerChoice} beats ${playerChoice}`;
            win = `You won! ${playerChoice} beats ${computerChoice}`;
            
            if(playerSpan.textContent == 5) {
                document.dispatchEvent('click')
            } else if(computerSpan.textContent == 5) {
                document.dispatchEvent('click')
            }

            if(computerChoice == rock){
                resultSpan.textContent = draw;
            } else if(computerChoice == paper) {
                computerScore++;
                computerSpan.textContent = computerScore;
                resultSpan.textContent = lose;
            } else {
                playerScore++;
                playerSpan.textContent = playerScore;
                resultSpan.textContent = win;
            }
        });

        paperButton.addEventListener('click', function(event) { 
            computerChoice = getComputerChoice();
            playerChoice = paper;
            draw = `Tie! You both chose ${computerChoice}`;
            lose = `You lost! ${computerChoice} beats ${playerChoice}`;
            win = `You won! ${playerChoice} beats ${computerChoice}`;

            if(playerSpan.textContent == 5) {
                document.dispatchEvent('click')
            } else if(computerSpan.textContent == 5) {
                document.dispatchEvent('click')
            }

            if(computerChoice == paper){
                resultSpan.textContent = draw;
            } else if(computerChoice == scissors) {
                computerScore++;
                computerSpan.textContent = computerScore;
                resultSpan.textContent = lose;
            } else {
                playerScore++;
                playerSpan.textContent = playerScore;
                resultSpan.textContent = win;
            }
        });

        scissorsButton.addEventListener('click', function(event) {
            computerChoice = getComputerChoice();
            playerChoice = scissors;
            draw = `Tie! You both chose ${computerChoice}`;
            lose = `You lost! ${computerChoice} beats ${playerChoice}`;
            win = `You won! ${playerChoice} beats ${computerChoice}`;

            if(playerSpan.textContent == 5) {
                document.dispatchEvent('click')
            } else if(computerSpan.textContent == 5) {
                document.dispatchEvent('click')
            }

            if(computerChoice == scissors){
                resultSpan.textContent = draw;
            } else if(computerChoice == rock) {
                computerScore++;
                computerSpan.textContent = computerScore;
                resultSpan.textContent = lose;
            } else {
                playerScore++;
                playerSpan.textContent = playerScore;
                resultSpan.textContent = win;
            }
        });

        document.addEventListener('click', function() {
            if(playerSpan.textContent == 5) {
                winnerSpan.textContent = 'Victory! You have won!'
                resultSpan.textContent = 'Refresh the page to start a new game'
            } else if(computerSpan.textContent == 5) {
                winnerSpan.textContent = 'Lose! Computer has won!'
                resultSpan.textContent = 'Refresh the page to start a new game'
            }
        })
        // const myEvent = new Event("customEvent");
        // scissorsButton.addEventListener("click", function (){
        //     if(playerSpan.textContent == 5 || computerSpan.textContent == 5){
        //         winnerSpan.textContent = 'Victory! You have won!'
        //     }
        // });        
    </script>

</body>
</html>